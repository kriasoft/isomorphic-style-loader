{"version":3,"file":"withStyles.js","sources":["src/withStyles.js"],"sourcesContent":["/**\n * Isomorphic CSS style loader for Webpack\n *\n * Copyright Â© 2015-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react'\nimport hoistStatics from 'hoist-non-react-statics'\n\nimport StyleContext from './StyleContext'\n\nfunction withStyles(...styles) {\n  return function wrapWithStyles(ComposedComponent) {\n    class WithStyles extends React.PureComponent {\n      constructor(props, context) {\n        super(props, context)\n        this.markServerDuplicatedStyles();\n        this.removeCss = context.insertCss(...styles)\n      }\n\n      componentWillUnmount() {\n        if (this.removeCss) {\n          setTimeout(this.removeCss, 0)\n        }\n      }\n\n      markServerDuplicatedStyles() {\n        const { isServer, css } = this.context;\n        if (!isServer) { return; }\n\n        styles.forEach(style => {\n          if(css.has(style._getCss())) {\n            style.isDuplicate = true;\n          } else {\n            style.isDuplicate = false;\n          }\n        });\n      }\n\n      renderStyles() {\n        const { isServer } = this.context;\n        if (!isServer) { return null; }\n        if (isServer\n          && styles.every(style => style.isDuplicate)\n        ) { return null; }\n        return (\n          <style type=\"text/css\">\n            { styles.map(style => style.isDuplicate ?\n            '' : style._getCss()\n            )}\n          </style>\n        );\n      }\n\n      render() {\n        return (\n          <React.Fragment>\n            { this.renderStyles() }\n            <ComposedComponent {...this.props} />\n          </React.Fragment>\n        )\n      }\n    }\n\n    const displayName = ComposedComponent.displayName || ComposedComponent.name || 'Component'\n\n    WithStyles.displayName = `WithStyles(${displayName})`\n    WithStyles.contextType = StyleContext\n    WithStyles.ComposedComponent = ComposedComponent\n\n    return hoistStatics(WithStyles, ComposedComponent)\n  }\n}\n\nexport default withStyles\n"],"names":["withStyles","styles","wrapWithStyles","ComposedComponent","WithStyles","props","context","markServerDuplicatedStyles","removeCss","insertCss","componentWillUnmount","setTimeout","isServer","css","forEach","style","has","_getCss","isDuplicate","renderStyles","every","map","render","React","PureComponent","displayName","name","contextType","StyleContext","hoistStatics"],"mappings":";;;;;;;;;;;;;;AAcA,SAASA,UAAT,GAA+B;oCAARC,MAAQ;IAARA,MAAQ;;;SACtB,SAASC,cAAT,CAAwBC,iBAAxB,EAA2C;QAC1CC,UAD0C;;;0BAElCC,KAAZ,EAAmBC,OAAnB,EAA4B;;;gDACpBD,KAAN,EAAaC,OAAb;;cACKC,0BAAL;;cACKC,SAAL,GAAiBF,OAAO,CAACG,SAAR,OAAAH,OAAO,EAAcL,MAAd,CAAxB;;;;;;aAGFS,oBAR8C,GAQ9C,gCAAuB;YACjB,KAAKF,SAAT,EAAoB;UAClBG,UAAU,CAAC,KAAKH,SAAN,EAAiB,CAAjB,CAAV;;OAV0C;;aAc9CD,0BAd8C,GAc9C,sCAA6B;4BACD,KAAKD,OADJ;YACnBM,QADmB,iBACnBA,QADmB;YACTC,GADS,iBACTA,GADS;;YAEvB,CAACD,QAAL,EAAe;;;;QAEfX,MAAM,CAACa,OAAP,CAAe,UAAAC,KAAK,EAAI;cACnBF,GAAG,CAACG,GAAJ,CAAQD,KAAK,CAACE,OAAN,EAAR,CAAH,EAA6B;YAC3BF,KAAK,CAACG,WAAN,GAAoB,IAApB;WADF,MAEO;YACLH,KAAK,CAACG,WAAN,GAAoB,KAApB;;SAJJ;OAlB4C;;aA2B9CC,YA3B8C,GA2B9C,wBAAe;YACLP,QADK,GACQ,KAAKN,OADb,CACLM,QADK;;YAET,CAACA,QAAL,EAAe;iBAAS,IAAP;;;YACbA,QAAQ,IACPX,MAAM,CAACmB,KAAP,CAAa,UAAAL,KAAK;iBAAIA,KAAK,CAACG,WAAV;SAAlB,CADL,EAEE;iBAAS,IAAP;;;eAEF;UAAO,IAAI,EAAC;WACRjB,MAAM,CAACoB,GAAP,CAAW,UAAAN,KAAK;iBAAIA,KAAK,CAACG,WAAN,GACtB,EADsB,GACjBH,KAAK,CAACE,OAAN,EADa;SAAhB,CADJ,CADF;OAjC4C;;aA0C9CK,MA1C8C,GA0C9C,kBAAS;eAEL,oBAAC,KAAD,CAAO,QAAP,QACI,KAAKH,YAAL,EADJ,EAEE,oBAAC,iBAAD,EAAuB,KAAKd,KAA5B,CAFF,CADF;OA3C4C;;;MACvBkB,KAAK,CAACC,aADiB;;QAoD1CC,WAAW,GAAGtB,iBAAiB,CAACsB,WAAlB,IAAiCtB,iBAAiB,CAACuB,IAAnD,IAA2D,WAA/E;IAEAtB,UAAU,CAACqB,WAAX,mBAAuCA,WAAvC;IACArB,UAAU,CAACuB,WAAX,GAAyBC,YAAzB;IACAxB,UAAU,CAACD,iBAAX,GAA+BA,iBAA/B;WAEO0B,YAAY,CAACzB,UAAD,EAAaD,iBAAb,CAAnB;GA1DF;;;;;"}